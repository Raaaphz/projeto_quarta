# üìò Documenta√ß√£o da API - Nome da API

---

## 1. Introdu√ß√£o

Bem-vindo √† API. Esta API √© feita para uma loja de veiculos e permite gerenciar os carros, os clientes, realizar transa√ß√µes e consultar os dados, tanto dos clientes como dos carros. Al√©m disso, tamb√©m temos o sistema de autentica√ß√£o para que apenas os vendedores e gerentes da loja consigam usar a api.

- **Base URL**: `http://localhost:8080`
- **Vers√£o**: 1.0.0
- **Formato de dados**: JSON
- **Status**: Est√°vel

---

## 2. Autentica√ß√£o

A API utiliza **JWT** para proteger os recursos.

### Como autenticar:

Ao fazer o login, o token √© gerado automaticamente, e expira depois de 24 horas, precisando fazer um login novamente.
A cada p√°gina navegada na interface, √© feita uma verifica√ß√£o no token para permitir ou barrar o acesso do usu√°rio.

---

## 3. URL Base

Todas as requisi√ß√µes devem usar a seguinte base:

```http
http://localhost:8080
```

Com um adicional na url em rela√ß√£o a qual √°rea a requisi√ß√£o deve ser feita.
Portanto:

-Para carros:

```http
http://localhost:8080/carros
```

-Para clientes:

```http
http://localhost:8080/clientes
```

-Para vendas:

```http
http://localhost:8080/vendas
```

-Para vendedores e gerentes/administradores:

```http
http://localhost:8080/usuarios
```

---

## 4. Formato de Requisi√ß√£o e Resposta

- **Content-Type aceito**: `application/json`
- **Formato de resposta**: JSON
- **Padr√£o de erros**:

```json
{
  "erro": "Mensagem explicando o erro"
}
```

### C√≥digos HTTP comuns:

| C√≥digo | Significado              |
| ------ | ------------------------ |
| 200    | OK                       |
| 201    | Criado com sucesso       |
| 400    | Requisi√ß√£o inv√°lida      |
| 401    | N√£o autorizado           |
| 403    | Proibido                 |
| 404    | N√£o encontrado           |
| 500    | Erro interno do servidor |

---

## 5. Endpoints

### PARA OS CLIENTES (/clientes)

#### üìç `GET /visualizarcliente`

**Descri√ß√£o**: Retorna os dados de todos os cliente.

**Exemplo de Requisi√ß√£o:**

```http
GET /visualizarcliente
```

**Resposta de sucesso:**

```json
{
  "id": 123,
  "nome": "joao",
  "sobrenome": "da silva",
  "nascimento": "01/01/1999",
  "logradouro": "rua teste, 123",
  "bairro": "bairro teste",
  "cep": 17250000,
  "cpf": 12345678900
}
```

**Erros comuns:**

- `404 Not Found`: Cliente n√£o existe

---

#### üìç `POST /cadastrarcliente`

**Descri√ß√£o**: Cria um novo cliente.

**Body:**

```json
{
  "nome": "joao",
  "sobrenome": "da silva",
  "nascimento": "01/01/1999",
  "logradouro": "rua teste, 123",
  "bairro": "bairro teste",
  "cep": 17250000,
  "cpf": 12345678900
}
```

**Resposta:**

```json
{
  "message": "Cliente cadastrado com sucesso"
}
```

**Erros comuns:**

- `400`: CPF ja cadastrado

#### üìç DELETE /deletarcliente/:cpf

**Descri√ß√£o**: Deleta um cliente a partir do CPF.

**Exemplo de Requisi√ß√£o:**

```http
DELETE /deletarcliente/12345678900
```

**Resposta:**

```json
Copiar c√≥digo
{
"message": "Cliente deletado com sucesso"
}
```

**Erros comuns:**

- `404 Not Found`: Cliente n√£o encontrado

#### üìç PUT /updatecliente/:cpf

**Descri√ß√£o**: Atualiza os dados de um cliente a partir do CPF.

Exemplo de Requisi√ß√£o:

```http
PUT /updatecliente/12345678900
```

**Body:**

```json
{
  "nome": "Jo√£o Atualizado",
  "logradouro": "Nova rua, 999"
}
```

**Resposta:**

```json
{
  "message": "Cliente atualizado com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Cliente n√£o encontrado

`400 Bad Request`: Dados inv√°lidos

#### üìç GET /clienteporcpf/:cpf

**Descri√ß√£o**: Busca um cliente pelo CPF.

**Exemplo de Requisi√ß√£o:**

```http
GET /clienteporcpf/12345678900
```

**Resposta:**

```json
{
  "id": 123,
  "nome": "joao",
  "cpf": 12345678900
}
```

**Erros comuns:**

`404 Not Found`: Cliente n√£o encontrado

#### üìç GET /clientepornome/:nome

**Descri√ß√£o:** Busca cliente(s) pelo nome.

**Exemplo de Requisi√ß√£o:**

```http
GET /clientepornome/joao
```

**Resposta:**

```json
{
  "id": 123,
  "nome": "joao",
  "cpf": 12345678900
}
```

**Erros comuns:**

`404 Not Found`: Nenhum cliente com esse nome encontrado

### PARA OS CARROS (/carros)

#### üìç `GET /visualizarcarro`

**Descri√ß√£o**: Retorna os dados de todos os carros.

**Exemplo de Requisi√ß√£o:**

```http
GET /visualizarcarro
```

**Resposta de sucesso:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "Vendido": "N"
}
```

**Erros comuns:**

- `404 Not Found`: Carro n√£o existe

---

#### üìç POST /cadastrarcarro

**Descri√ß√£o**: Cadastra um novo carro.

**Body:**

```json
{
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Resposta:**

```json
{
  "message": "Carro cadastrado com sucesso"
}
```

**Erros comuns:**

`400 Bad Request`: Placa j√° cadastrada

---

#### üìç DELETE /deletarcarro/:placa

**Descri√ß√£o**: Deleta um carro a partir da placa.

**Exemplo de Requisi√ß√£o:**

```http
DELETE /deletarcarro/abc1234
```

**Resposta:**

```json
{
  "message": "Carro deletado com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Carro n√£o encontrado

---

#### üìç PUT /updatecarro/:placa

**Descri√ß√£o**: Atualiza os dados de um carro a partir da placa.

**Exemplo de Requisi√ß√£o:**

```http
PUT /updatecarro/abc1234
```

**Body:**

```json
{
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Resposta:**

```json
{
  "message": "Carro atualizado com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Carro n√£o encontrado

`400 Bad Request`: Dados inv√°lidos

---

#### üìç GET /carroporplaca/:placa

**Descri√ß√£o**: Retorna os dados de um carro com base na placa.

**Exemplo de Requisi√ß√£o:**

```http
GET /carroporplaca/abc1234
```

**Resposta:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Erros comuns:**

`404 Not Found`: Carro n√£o encontrado

---

#### üìç GET /carroporcor/:cor

**Descri√ß√£o**: Retorna os carros filtrados por cor.

**Exemplo de Requisi√ß√£o:**

```http
GET /carroporcor/branco
```

**Resposta:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Erros comuns:**

`404 Not Found`: Nenhum carro encontrado com essa cor

---

#### üìç GET /carropormodelo/:modelo

**Descri√ß√£o**: Retorna os carros filtrados por modelo.

**Exemplo de Requisi√ß√£o:**

```http
GET /carropormodelo/ka
```

**Resposta:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

Erros comuns:

`404 Not Found`: Nenhum carro encontrado com esse modelo

---

#### üìç GET /carroporkm/:km

**Descri√ß√£o**: Retorna os carros com base na quilometragem exata.

**Exemplo de Requisi√ß√£o:**

```http
GET /carroporkm/123456
```

Resposta:

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Erros comuns:**

`404 Not Found`: Nenhum carro com essa quilometragem

---

#### üìç GET /carropormarca/:marca

**Descri√ß√£o**: Retorna os carros filtrados por marca.

**Exemplo de Requisi√ß√£o:**

```https
GET /carropormarca/ford
```

**Resposta:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Erros comuns:**

`404 Not Found`: Nenhum carro com essa marca

---

#### üìç GET /carroporvalor/:valor

**Descri√ß√£o**: Retorna os carros com base no valor exato informado.

**Exemplo de Requisi√ß√£o:**

```http
GET /carroporvalor/15000
```

**Resposta:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Erros comuns:**

`404 Not Found`: Nenhum carro encontrado com esse valor

---

#### üìç GET /carrovendido/:vendido

**Descri√ß√£o**: Retorna carros com base no status de venda (S ou N).

**Exemplo de Requisi√ß√£o:**

```http
GET /carrovendido/N
```

**Resposta:**

```json
{
  "id": 123,
  "marca": "ford",
  "modelo": "ka",
  "ano": "2006",
  "placa": "abc1234",
  "cor": "branco",
  "valor": 15000,
  "km": 123456,
  "vendido": "N"
}
```

**Erros comuns:**

`404 Not Found`: Nenhum carro encontrado com esse status de venda

---

### PARA AS VENDAS (/vendas)

#### üìç GET /visualizarvenda/

**Descri√ß√£o**: Retorna todas as vendas

```http
GET /visualizarvenda
```

**Resposta:**

```json
{
  "id": 123,
  "valor": "20000",
  "diavenda": "150052024",
  "cpf": "12345678900",
  "placa": "abc1234",
  "vendedor": "Carlos"
}
```

**Erros comuns:**

`404 Not Found`: Venda nao encontrada

---

#### üìç POST /venda/:placa

**Descri√ß√£o:** Realiza a venda de um carro com base na placa.

```http
POST /venda/abc1234
```

**Body:**

```json
{
  "cpf": "12345678900",
  "diavenda": "11052025",
  "vendedor": "Carlos",
  "valor": 20000
}
```

**Resposta:**

```json
{
  "message": "Venda realizada com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Carro n√£o encontrado

`400 Bad Request`: Dados inv√°lidos

---

#### üìç GET /vendaporvendedor/:vendedor

**Descri√ß√£o**: Retorna as vendas realizadas por um determinado vendedor.

```http
GET /vendaporvendedor/Carlos
```

**Resposta**:

```json
{
  "id": 123,
  "valor": "20000",
  "diavenda": "150052024",
  "cpf": "12345678900",
  "placa": "abc1234",
  "vendedor": "Carlos"
}
```

**Erros comuns:**

`404 Not Found`: Nenhuma venda encontrada para esse vendedor

---

#### üìç DELETE /deletarvenda/:idvenda

**Descri√ß√£o**: Deleta uma venda com base no ID.

```http
DELETE /deletarvenda/123
```

**Resposta:**

```json
{
  "message": "Venda deletada com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Venda n√£o encontrada

---

#### üìç PUT /atualizarvenda/:idvenda

**Descri√ß√£o**: Atualiza os dados de uma venda com base no ID.

```http
PUT /atualizarvenda/123
```

**Body:**

```json
{
  "valor": 21000,
  "vendedor": "Carlos"
}
```

**Resposta:**

```json
{
  "message": "Venda atualizada com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Venda n√£o encontrada

`400 Bad Request`: Dados inv√°lidos

---

### PARA OS VENDEDORES E GERENTES/ADMINS(/usuarios)

#### üìçGET /listauser

**Descri√ß√£o**: Exibe todos os vendedores e gerentes

```http
GET /listauser
```

**Resposta**:

```json
{
  "id": 123,
  "usuario": "Carlos",
  "senha": "(a senha √© exibida criptografada pelo bcrypt)"
}
```

**Erros comuns:**

`404 Not Found`: usuario nao encontrado

---

#### üìç `POST /cadastrarvendedor`

**Descri√ß√£o**: Cadastra um novo vendedor.

```http
POST /cadastrarvendedor
Body:
```

```json
{
  "usuario": "Carlos",
  "senha": "senha123",
  "cargo": "vendedor"
}
```

**Resposta:**

```json
{
  "message": "Vendedor cadastrado com sucesso"
}
```

**Erros comuns:**

`400 Bad Request`: Usu√°rio j√° existe

`500 Internal Server Error`: Erro no cadastro

---

#### üìç POST /logar

**Descri√ß√£o**: Realiza o login de um usu√°rio e gera seu codigo de autentica√ß√£o.

```http
POST /logar
```

**Body:**

```json
{
  "usuario": "Carlos",
  "senha": "senha123"
}
```

**Resposta:**

```json
{
  "token": "jwt_token_gerado"
}
```

**Erros comuns:**

`401 Unauthorized`: Usu√°rio ou senha inv√°lidos

---

#### üìç GET /logout

**Descri√ß√£o**: Faz logout do usu√°rio atual e apaga seu codigo de autentica√ß√£o.

```http
GET /logout
```

**Resposta**:

```json
{
  "message": "Logout realizado com sucesso"
}
```

#### üìç GET /usuariologado

**Descri√ß√£o**: Retorna os dados do usu√°rio autenticado (JWT necess√°rio).

```http
GET /usuariologado
```

**Resposta:**

```json
{
  "id": 123,
  "usuario": "Carlos",
  "cargo": "vendedor"
}
```

**Erros comuns:**

`401 Unauthorized`: Token inv√°lido ou ausente

---

#### üìç PUT /atualizarusuario/:iduser

`Descri√ß√£o`: Atualiza os dados de um usu√°rio pelo ID.

```http
PUT /atualizarusuario/123
```

**Body**:

```json
{
  "usuario": "CarlosAtualizado",
  "senha": "novaSenha123"
}
```

**Resposta:**

```json
{
  "message": "Usu√°rio atualizado com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Usu√°rio n√£o encontrado

`400 Bad Request`: Dados inv√°lidos

---

#### üìç DELETE /deletarusuario/:iduser

**Descri√ß√£o**: Deleta um usu√°rio pelo ID.

```http
DELETE /deletarusuario/123
```

**Resposta:**

```json
{
  "message": "Usu√°rio deletado com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Usu√°rio n√£o encontrado

---

#### üìç GET /usuariopornome/:usuario

**Descri√ß√£o**: Retorna um usu√°rio pelo nome.

```http
GET /usuariopornome/Carlos
```

**Resposta:**

```json
{
  "id": 123,
  "usuario": "Carlos",
  "cargo": "vendedor"
}
```

**Erros comuns:**

`404 Not Found`: Usu√°rio n√£o encontrado

---

#### üìç GET /usuarioporcargo/:cargo

**Descri√ß√£o**: Lista todos os usu√°rios de um determinado cargo.

```http
GET /usuarioporcargo/vendedor
```

**Resposta:**

```json
{
  "id": 123,
  "usuario": "Carlos",
  "cargo": "vendedor"
}
```

**Erros comuns:**

`404 Not Found`: Nenhum usu√°rio com esse cargo

---

#### üìç PUT /atualizarcargo

**Descri√ß√£o**: Atualiza o cargo de um usu√°rio.

```http
PUT /atualizarcargo
```

**Body:**

```json
{
  "id": 123,
  "cargo": "gerente"
}
```

**Resposta:**

```json
{
  "message": "Cargo atualizado com sucesso"
}
```

**Erros comuns:**

`404 Not Found`: Usu√°rio n√£o encontrado

`400 Bad Request`: Cargo inv√°lido

---

## 6. Changelog

### [1.0.0] - 2025-05-28

- Vers√£o inicial lan√ßada
- Adicionados endpoints de cria√ß√£o e consulta de clientes

---
